<!DOCTYPE html>  
<!--[if IE 7]>
<html class="ie ie7" lang="en-US">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="en-US">
<![endif]-->
<!--[if !(IE 7) | !(IE 8)  ]><!-->
<html lang="en-US">
<!--<![endif]-->

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width"/>
    <title>OPENi | a European Union ICT Project</title>
    <link rel="profile" href="http://gmpg.org/xfn/11"/>
    <link rel="pingback" href="xmlrpc.php"/>
    <link rel="shortcut icon" href="/wp-content/themes/openi/favicon.ico"/>
    <!--[if lt IE 9]>
    <script src="/wp-content/themes/openi/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link rel="alternate" type="application/rss+xml" title="OPENi &raquo; Feed" href="feed/index.html"/>
    <link rel="alternate" type="application/rss+xml" title="OPENi &raquo; Comments Feed"
          href="comments/feed/index.html"/>

    <script type="text/javascript">
        //<![CDATA[
        // Google Analytics for WordPress by Yoast v4.2.8 | http://yoast.com/wordpress/google-analytics/
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37594867-1']);
        _gaq.push(['_trackPageview']);
        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
        //]]></script>
    <link rel='stylesheet' id='cptchStylesheet-css' href='/wp-content/plugins/captcha/css/style1bba.css?ver=3.5'
          type='text/css' media='all'/>
    <link rel='stylesheet' id='contact-form-7-css'
          href='/wp-content/plugins/contact-form-7/includes/css/stylesd617.css?ver=3.3.2' type='text/css' media='all'/>
    <link rel='stylesheet' id='twentytwelve-fonts-css'
          href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&amp;subset=latin,latin-ext'
          type='text/css' media='all'/>
    <link rel='stylesheet' id='twentytwelve-style-css' href='/wp-content/themes/openi/style1bba.css?ver=3.5'
          type='text/css' media='all'/>
    <!--[if lt IE 9]>
    <link rel='stylesheet' id='twentytwelve-ie-css'
          href='/wp-content/themes/openi/css/ie.css?ver=20121010' type='text/css' media='all'/>
    <![endif]-->
    <link rel='stylesheet' id='flex-style-css' href='/wp-content/themes/openi/inc/slider/css/flexslider1bba.css?ver=3.5'
          type='text/css' media='all'/>
    <link rel='stylesheet' id='easy_table_style-css'
          href='/wp-content/plugins/easy-table/themes/default/style492f.css?ver=0.9' type='text/css' media='all'/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <!--script type='text/javascript' src='/wp-includes/js/jquery/jquery4511.js?ver=1.8.3'></script-->
    <link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd"/>
    <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml"/>
    <link rel='next' title='News' href='news/index.html'/>
    <meta name="generator" content="WordPress 3.5"/>
    <link rel='canonical' href='index.html'/>

    <script type="text/javascript" charset="utf-8">
        jQuery(window).load(function () {
            jQuery('.flexslider').flexslider({
                animation: "fade",
                direction: "horizontal",
                slideshowSpeed: 7000,
                animationSpeed: 600,
                controlNav: true,
                directionNav: true,
                prevText: "Previous",
                nextText: "Next"
            });
        });
    </script>

    <link rel='stylesheet' href='tutorial_style.css' type='text/css' media='all'/>

</head>

<body class="home page page-id-4 page-template-default custom-font-enabled">
<div id="page" class="hfeed site">
<header id="masthead" class="site-header" role="banner">
    <div id="headergroup"  style="width: 700px;">
        <hgroup>
            <h1 class="site-title"><a href="/" title="OPENi"
                                      rel="home">OPENi</a></h1>
            <!--<h2 class="site-description"></h2>-->
        </hgroup>
        <nav id="site-navigation" class="main-navigation" role="navigation">
            <h3 class="menu-toggle">Menu</h3>
            <a class="assistive-text" href="#content" title="Skip to content">Skip to content</a>

        </nav>
    </div>
</header>

<div id="main" class="wrapper" style="width: 700px;">

    
<!DOCTYPE html><html><head><meta charset="utf-8"><title>OPENi Android Tutorial</title><style></style></head><body>
<h1 id="openi-android-tutorial">OPENi Android Tutorial</h1>
<hr>
<p>This tutorial will cover the use of the OPENi Android client library available for <a href="https://demo2.openi-ict.eu/android-sdk/openi-client-lib.aar">download</a>.</p>
<p>Create a new android project. This project will be used for the purpose of this tutorial.</p>
<p>Download the OPENi Android Client Library and place it into the <strong>libs</strong> folder within your Android project directory.</p>
<p>To enable your android project to utilize the library it must be imported by the porject. This is done in the <strong>gradle.build</strong> file.</p>
<p>The <strong>gradle.build</strong> file should look something like this:</p>
<pre><code>apply plugin: &#39;com.android.application&#39;

android {
    compileSdkVersion 21
    buildToolsVersion &quot;20.0.0&quot;

    defaultConfig {
        applicationId &quot;org.tssg.openi.openiandroidtutorial&quot;
        minSdkVersion 16
        targetSdkVersion 21
        versionCode 1
        versionName &quot;1.0&quot;
    }
    buildTypes {
        release {
            runProguard false
            proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;
        }
    }
}

dependencies {
    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])
}
</code></pre><hr>
<h3 id="including-the-library">Including the Library</h3>
<p>To add the client library into gradle we make the following changes to the gradle.build file.</p>
<pre><code>apply plugin: &#39;com.android.application&#39;
...
android {
    ...
    packagingOptions {
        exclude &#39;META-INF/DEPENDENCIES&#39;
        exclude &#39;META-INF/NOTICE&#39;
        exclude &#39;META-INF/LICENSE&#39;
        exclude &#39;META-INF/LICENSE.txt&#39;
        exclude &#39;META-INF/NOTICE.txt&#39;
        exclude &#39;LICENSE.txt&#39;
        exclude &#39;APK LICENSE.txt&#39;
    }
}

repositories {
    flatDir {
        dirs &#39;libs&#39;
    }
}

dependencies {
    compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])
    compile(name:&#39;openi-client-lib&#39;, ext:&#39;aar&#39;)
}
</code></pre><p><strong>N.B.</strong> The packagingOptions configuration prevents known issues with duplicate META files within dependancies</p>
<p><strong>libs</strong> is the folder that we placed the client library in when we downloaded it. This addition to the gradle.build file will allow the project to impoirt and use it. </p>
<p>Once the project is rebuild with these lines included you should have access to the OPENi functions.</p>
<hr>
<h2 id="activity-implementation">Activity Implementation</h2>
<p>Using the default blank activity in the android project we will </p>
<p>We add the call, OPENiAsync.initOPENiAsync(&quot;openi_camera_demo_app&quot;, this); to the onCreate function. This function takes the identifier for the application that has been setup on the OPENi Platform. In this case we are using an application id that is already setup on the Platform, <em>openi_camera_demo_app</em>.</p>
<pre><code class="lang-java"><span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        OPENiAsync.initOPENiAsync(<span class="hljs-string">"openi_camera_demo_app"</span>, <span class="hljs-keyword">this</span>);
        ...
        openiTest();
    }
</code></pre>
<p>This function below is called within the onCreate. It shows the use of the OPENiAsync class. In this example We are getting an Object via a call to OPENiAsync.</p>
<pre><code class="lang-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">openiTest</span><span class="hljs-params">()</span> </span>{
        OPENiAsync.getOPENiAsync().getCloudletObject(<span class="hljs-keyword">new</span> ICloudletObjectCall() {

            <span class="hljs-annotation">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">doProcess</span><span class="hljs-params">(String authToken)</span> <span class="hljs-keyword">throws</span> ApiException </span>{
                <span class="hljs-keyword">return</span> OPENiUtils.getObjectApi().getObjectByAuthToken(<span class="hljs-string">"0ecc29f0-a6c2-4531-a2b5-5cc27d94caf4"</span>, Boolean.FALSE, authToken);
            }
            <span class="hljs-annotation">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(Object obj)</span> </span>{
                <span class="hljs-keyword">final</span> OPENiObject oo = (OPENiObject) obj;
                Log.d(<span class="hljs-string">"Get Object"</span>, oo.toString());
                <span class="hljs-keyword">final</span> JSONObject data = OPENiUtils.getObjectData(oo);
                Log.d(<span class="hljs-string">"Get Object"</span>, data.toString());
                Toast toast = Toast.makeText(getApplicationContext(),data.toString(),Toast.LENGTH_LONG);
                toast.show();`
            }
            <span class="hljs-annotation">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFailure</span><span class="hljs-params">()</span> </span>{
                Log.e(<span class="hljs-string">"Get Object"</span>, <span class="hljs-string">"Error getting object by id."</span>);
            }
        });
    }
</code></pre>
<p>--</p>
<h2 id="permissions">Permissions</h2>
<p>Add permissions to the <strong>AndroidManifest.xml</strong></p>
<p><strong>N.B.</strong> This is needed to allow calls to the OPENi Platform</p>
<pre><code class="lang-xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">manifest</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.INTERNET"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">manifest</span>&gt;</span>
</code></pre>
<hr>
<h2 id="running-the-applications">Running the Applications</h2>
<p>When the application is run you will see a login dialog.</p>
<p>Use the login details <strong>openitest</strong>, <strong>openitest</strong> and you should receive a popup showing the data received from OPENi.</p>

</body></html>

</div>

</div>
</body></html>